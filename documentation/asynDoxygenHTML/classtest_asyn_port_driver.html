<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>asyn: testAsynPortDriver Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>testAsynPortDriver Class Reference</h1><!-- doxytag: class="testAsynPortDriver" --><!-- doxytag: inherits="asynPortDriver" -->Class that demonstrates the use of the <a class="el" href="classasyn_port_driver.html" title="Base class for asyn port drivers; handles most of the bookkeeping for writing an...">asynPortDriver</a> base class to greatly simplify the task of writing an asyn port driver.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Inheritance diagram for testAsynPortDriver:</div>
<div class="dynsection">

<p><center><img src="classtest_asyn_port_driver.png" usemap="#testAsynPortDriver_map" border="0" alt=""></center>
<map name="testAsynPortDriver_map">
<area href="classasyn_port_driver.html" alt="asynPortDriver" shape="rect" coords="0,0,119,24">
</map>
</div>

<p>
<a href="classtest_asyn_port_driver-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#8ab662451c4f1063616d66c82368f4fa">testAsynPortDriver</a> (const char *<a class="el" href="classasyn_port_driver.html#8ddf9106f0496dcdaa47dd9a2255fd6b">portName</a>, int maxArraySize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor for the <a class="el" href="classtest_asyn_port_driver.html" title="Class that demonstrates the use of the asynPortDriver base class to greatly simplify...">testAsynPortDriver</a> class.  <a href="#8ab662451c4f1063616d66c82368f4fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual asynStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#c43147a2c8d0ba9652d65b3ffb23791f">writeInt32</a> (asynUser *pasynUser, epicsInt32 value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when asyn clients call pasynInt32-&gt;write().  <a href="#c43147a2c8d0ba9652d65b3ffb23791f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual asynStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#d68bd63bbdbbb636c412d85a2b3da18a">writeFloat64</a> (asynUser *pasynUser, epicsFloat64 value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when asyn clients call pasynFloat64-&gt;write().  <a href="#d68bd63bbdbbb636c412d85a2b3da18a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual asynStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#7f49b35f2282a1cf1e70e959da1e270a">readFloat64Array</a> (asynUser *pasynUser, epicsFloat64 *value, size_t nElements, size_t *nIn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when asyn clients call pasynFloat64Array-&gt;read().  <a href="#7f49b35f2282a1cf1e70e959da1e270a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual asynStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#9e7bc84e4a0a2993694e1b5fd9310228">drvUserCreate</a> (asynUser *pasynUser, const char *drvInfo, const char **pptypeName, size_t *psize)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called by asynManager to pass a pasynUser structure and drvInfo string to the driver; assigns pasynUser-&gt;reason to one of the testParams enum value based on the value of the drvInfo string.  <a href="#9e7bc84e4a0a2993694e1b5fd9310228"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest_asyn_port_driver.html#703e85c2a42e9d33dd0be63912ebb583">simTask</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simulation task that runs as a separate thread.  <a href="#703e85c2a42e9d33dd0be63912ebb583"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class that demonstrates the use of the <a class="el" href="classasyn_port_driver.html" title="Base class for asyn port drivers; handles most of the bookkeeping for writing an...">asynPortDriver</a> base class to greatly simplify the task of writing an asyn port driver. 
<p>
This class does a simple simulation of a digital oscilloscope. It computes a waveform, computes statistics on the waveform, and does callbacks with the statistics and the waveform data itself. I have made the methods of this class public in order to generate doxygen documentation for them, but they should really all be private. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="8ab662451c4f1063616d66c82368f4fa"></a><!-- doxytag: member="testAsynPortDriver::testAsynPortDriver" ref="8ab662451c4f1063616d66c82368f4fa" args="(const char *portName, int maxArraySize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">testAsynPortDriver::testAsynPortDriver           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>portName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>maxPoints</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Constructor for the <a class="el" href="classtest_asyn_port_driver.html" title="Class that demonstrates the use of the asynPortDriver base class to greatly simplify...">testAsynPortDriver</a> class. 
<p>
Calls constructor for the <a class="el" href="classasyn_port_driver.html" title="Base class for asyn port drivers; handles most of the bookkeeping for writing an...">asynPortDriver</a> base class. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>portName</em>&nbsp;</td><td>The name of the asyn port driver to be created. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>maxPoints</em>&nbsp;</td><td>The maximum number of points in the volt and time arrays </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c43147a2c8d0ba9652d65b3ffb23791f"></a><!-- doxytag: member="testAsynPortDriver::writeInt32" ref="c43147a2c8d0ba9652d65b3ffb23791f" args="(asynUser *pasynUser, epicsInt32 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">asynStatus testAsynPortDriver::writeInt32           </td>
          <td>(</td>
          <td class="paramtype">asynUser *&nbsp;</td>
          <td class="paramname"> <em>pasynUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">epicsInt32&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when asyn clients call pasynInt32-&gt;write(). 
<p>
This function sends a signal to the simTask thread if the value of P_Run has changed. For all parameters it sets the value in the parameter library and calls any registered callbacks.. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pasynUser</em>&nbsp;</td><td>pasynUser structure that encodes the reason and address. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Value to write. </td></tr>
  </table>
</dl>

<p>Reimplemented from <a class="el" href="classasyn_port_driver.html#1215286a6408d471e7405a46519e3216">asynPortDriver</a>.</p>

</div>
</div><p>
<a class="anchor" name="d68bd63bbdbbb636c412d85a2b3da18a"></a><!-- doxytag: member="testAsynPortDriver::writeFloat64" ref="d68bd63bbdbbb636c412d85a2b3da18a" args="(asynUser *pasynUser, epicsFloat64 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">asynStatus testAsynPortDriver::writeFloat64           </td>
          <td>(</td>
          <td class="paramtype">asynUser *&nbsp;</td>
          <td class="paramname"> <em>pasynUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">epicsFloat64&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when asyn clients call pasynFloat64-&gt;write(). 
<p>
This function sends a signal to the simTask thread if the value of P_UpdateTime has changed. For all parameters it sets the value in the parameter library and calls any registered callbacks. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pasynUser</em>&nbsp;</td><td>pasynUser structure that encodes the reason and address. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Value to write. </td></tr>
  </table>
</dl>

<p>Reimplemented from <a class="el" href="classasyn_port_driver.html#75e58b4afefeffdccd93014289256b13">asynPortDriver</a>.</p>

</div>
</div><p>
<a class="anchor" name="7f49b35f2282a1cf1e70e959da1e270a"></a><!-- doxytag: member="testAsynPortDriver::readFloat64Array" ref="7f49b35f2282a1cf1e70e959da1e270a" args="(asynUser *pasynUser, epicsFloat64 *value, size_t nElements, size_t *nIn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">asynStatus testAsynPortDriver::readFloat64Array           </td>
          <td>(</td>
          <td class="paramtype">asynUser *&nbsp;</td>
          <td class="paramname"> <em>pasynUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">epicsFloat64 *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>nElements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>nIn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called when asyn clients call pasynFloat64Array-&gt;read(). 
<p>
Returns the value of the P_Waveform or P_TimeBase arrays. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pasynUser</em>&nbsp;</td><td>pasynUser structure that encodes the reason and address. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>Pointer to the array to read. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>nElements</em>&nbsp;</td><td>Number of elements to read. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>nIn</em>&nbsp;</td><td>Number of elements actually read. </td></tr>
  </table>
</dl>

<p>Reimplemented from <a class="el" href="classasyn_port_driver.html#f9e0d45589a67b26a54daf95ce31bce8">asynPortDriver</a>.</p>

</div>
</div><p>
<a class="anchor" name="9e7bc84e4a0a2993694e1b5fd9310228"></a><!-- doxytag: member="testAsynPortDriver::drvUserCreate" ref="9e7bc84e4a0a2993694e1b5fd9310228" args="(asynUser *pasynUser, const char *drvInfo, const char **pptypeName, size_t *psize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">asynStatus testAsynPortDriver::drvUserCreate           </td>
          <td>(</td>
          <td class="paramtype">asynUser *&nbsp;</td>
          <td class="paramname"> <em>pasynUser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>drvInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&nbsp;</td>
          <td class="paramname"> <em>pptypeName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&nbsp;</td>
          <td class="paramname"> <em>psize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Called by asynManager to pass a pasynUser structure and drvInfo string to the driver; assigns pasynUser-&gt;reason to one of the testParams enum value based on the value of the drvInfo string. 
<p>
Simply calls <a class="el" href="classasyn_port_driver.html#ebea3ae3892f2936af64f10e5e61507c" title="Convenience function typically called by derived classes from their drvUserCreate...">asynPortDriver::drvUserCreateParam</a> with the parameter table for this driver. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>pasynUser</em>&nbsp;</td><td>pasynUser structure that driver modifies </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>drvInfo</em>&nbsp;</td><td>String containing information about what driver function is being referenced </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pptypeName</em>&nbsp;</td><td>Location in which driver puts a copy of drvInfo. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>psize</em>&nbsp;</td><td>Location where driver puts size of param. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns asynSuccess if a matching string was found, asynError if not found. </dd></dl>

<p>Reimplemented from <a class="el" href="classasyn_port_driver.html#684edc92eb34cec6def9131dc638257d">asynPortDriver</a>.</p>

</div>
</div><p>
<a class="anchor" name="703e85c2a42e9d33dd0be63912ebb583"></a><!-- doxytag: member="testAsynPortDriver::simTask" ref="703e85c2a42e9d33dd0be63912ebb583" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void testAsynPortDriver::simTask           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simulation task that runs as a separate thread. 
<p>
When the P_Run parameter is set to 1 to rub the simulation it computes a 1 kHz sine wave with 1V amplitude and user-controllable noise, and displays it on a simulated scope. It computes waveforms for the X (time) and Y (volt) axes, and computes statistics about the waveform. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>/home/phoebus/NORUME/tmp/asyn-4.12/testAsynPortDriverApp/src/<a class="el" href="test_asyn_port_driver_8cpp.html">testAsynPortDriver.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Aug 19 15:50:33 2009 for asyn by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
